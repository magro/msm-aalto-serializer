# Generated by Buildr 1.3.3, change to your liking
# Standard maven2 repository
require 'etc/checkstyle'

repositories.remote << 'http://repo2.maven.org/maven2'
repositories.remote << 'http://www.ibiblio.org/maven2'
repositories.remote << 'http://thimbleware.com/maven'
repositories.remote << 'http://repository.jboss.com/maven2'
repositories.remote << 'http://google-gson.googlecode.com/svn/mavenrepo'

SERVLET_API = 'javax.servlet:servlet-api:jar:2.5'
TC_CATALINA = 'org.apache.tomcat:catalina:jar:6.0.18'
TC_COYOTE = 'org.apache.tomcat:coyote:jar:6.0.18'
TC_LOGGING = transitive( 'org.apache.tomcat:juli:jar:6.0.18' )
MEMCACHED = artifact('spy.memcached:spymemcached:jar:2.4').from(file('lib/memcached-2.4.jar'))
MSM = artifact( 'de.javakaffee.web:memcached-session-manager:jar:1.1-SNAPSHOT' ).from(file('lib/memcached-session-manager-1.1-SNAPSHOT.jar'))
AALTO = artifact( 'aalto:aalto:jar:0.9.5' ).from(file('lib/aalto-gpl-0.9.5.jar'))
STAX2_API = artifact( 'org.codehaus.woodstox:stax2-api:jar:3.0.1' ).from(file('lib/stax2-api-3.0.1.jar'))
COMMONS_CODEC = 'commons-codec:commons-codec:jar:1.4'

# Testing
CLANG = 'commons-lang:commons-lang:jar:2.4'
JMOCK_CGLIB = transitive( 'jmock:jmock-cglib:jar:1.2.0' )

desc 'msm-aalto-serializer'
define 'msm-aalto-serializer' do
  project.group = 'de.javakaffee.web.msm.serializer'
  project.version = '1.1-SNAPSHOT'
  
  compile.with( SERVLET_API, TC_CATALINA, TC_COYOTE, TC_LOGGING, MEMCACHED, MSM, AALTO, STAX2_API, COMMONS_CODEC )
  compile.using( :source=>'1.5', :target=>'1.5' )
  
  test.with( compile.dependencies, CLANG, JMOCK_CGLIB )
  test.using :testng
  
  package :jar, :id => 'msm-aalto-serializer'
  package :sources
  package :javadoc

  checkstyle.config 'etc/checkstyle-checks.xml'
  checkstyle.style 'etc/checkstyle.xsl'

end
